# Вопросы для самостоятельной работы: iptables

## Практические задания

### Задание 1: Базовая настройка файрвола
Создайте скрипт iptables, который:
- Разрешает весь трафик loopback интерфейса
- Разрешает уже установленные соединения
- Разрешает входящие соединения на порт 22 (SSH) только с вашей сети
- Блокирует весь остальной входящий трафик
- Разрешает весь исходящий трафик

### Задание 2: Настройка NAT
Настройте iptables для:
- Маскарадинга исходящего трафика в интернет
- Проброса порта 80 внешнего интерфейса на внутренний веб-сервер
- Проброса порта 443 на внутренний сервер

### Задание 3: Мониторинг и логирование
Создайте правила для:
- Логирования всех отброшенных пакетов
- Логирования попыток подключения к закрытым портам
- Ограничения количества соединений с одного IP

### Задание 4: Защита от атак
Реализуйте защиту от:
- SYN-флуда
- Port scanning
- ICMP flood
- Invalid packets

### Задание 5: Настройка NAT с MASQUERADE
Создайте правила для:
- Маскарадинга всего исходящего трафика через интерфейс eth0
- Проброса порта 80 на внутренний веб-сервер 192.168.1.10
- Проброса диапазона портов 2000-2010 на внутренний сервер

### Задание 6: Логирование и мониторинг
Настройте iptables для:
- Логирования всех попыток подключения к портам 22, 80, 443
- Ограничения количества одновременных соединений с одного IP (не более 10)
- Логирования подозрительного трафика (invalid state)

## Рекомендации

Студенты должны предоставить готовые скрипты iptables, объяснения каждого правила и результаты тестирования с помощью команд `iptables -L -v -n` и `iptables-save`.
